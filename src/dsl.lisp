(defpackage monomyth/dsl
  (:use :cl :monomyth/rmq-node :stmx :monomyth/node :monomyth/rmq-node-recipe
   :monomyth/rmq-worker :monomyth/worker :monomyth/node-recipe :monomyth/master)
  (:import-from :alexandria with-gensyms)
  (:export define-system define-rmq-node mashup-symbol build-queues))
(in-package :monomyth/dsl)

(defparameter *start-name* 'start)
(defparameter *end-name* 'end)

(defun mashup-symbol (&rest objects)
  "takes a bunch of symbols and combines them"
  (intern (format nil "狺镡赍泗螬┅ㄤ彐躅溴骈铄蝽癍铒溴轭翦蝾犰钺礤趄犷箧矧憝骢钽箫躜沐聃艴溴篝聃艴箝钺礤脲⑸铘弪钺骢钽糸镱翳狒泸遽翦翳蝽铒溴麸戾鲥骘蝽螽啜戾è钺礤脲ㄩ铘弪簌礅镬钺礤钺礤⑺刨紫夷┅趄犷筢泗轱钺ㄤ彐沆狍钺礤蝽癍铒溴ī┅ㄤ彐沆狍磲箬躔簌礅镬钺礤Л蝈汩疱蝽癍铒溴蝈汩疱īㄤ彐躅磲箬躔簌礅镬р蹰熹钺礤钺礤箫躜沐溴篝驷殪豉疱箝栾篝痫螋躞弪疳篌磲脲轭篝犷沐聃雉钺礤侯犴钺礤后秕蜚箫躜沐轰弩溴篝烘衢驷殪呼疱豉疱后辁箝恒镱箦趱瓠泔铑邈糸镱鸿矬栾篝吼矧痫螋乎箦蝾犴躞弪吼狍篦矧疳篌┅ㄤ彐躅磲箬躔簌礅镬р蹰熹钺礤Л蝈汩疱ī磲脲轭篝犷沐聃雉磲箬躔簌礅镬钺礤Л蝈汩疱┅后秕蜚箫躜沐聃艴轰弩溴篝聃艴呼疱钺礤脲衡狒汨箝箝濠ㄤ彐礤翳镤怩殪洵铒溴è黠螂弪蝽癍黠螂弪蝈汩疱磲箬躔簌礅镬钺礤Л蝈汩疱┅ì磲箬躔簌礅镬р蹰熹钺礤钺礤铒溴蝈汩疱蝽癍铒溴蝈汩疱箫躜沐聃艴蝈汩疱蝽癍铒溴蝈汩疱溴篝聃艴蝈汩疱钺礤驷殪聃艴蝈汩疱铒溴蝈汩疱豉疱蝈汩疱铒溴蝈汩疱忉翥璀箝蝈汩疱蝽癍黠螂弪栾篝黠螂弪蝽癍黠螂弪痫螋黠螂弪蝽癍黠螂弪躞弪钺礤黠螂弪蝽癍黠螂弪疳篌黠蜾黠螂弪┅ㄤ彐礤翳镤趄犷箧矧憝骖è铒溴钺礤轸屙螬ㄦ躅汜祆趄犷箧矧憝骢钽轸屙螬┅ㄤ彐磲泸溴骈铄蝽癍铒溴钺礤趄犷箧矧憝骢钽箫躜沐聃艴溴篝聃艴箝濠⒛彐轭弩犰沆狍箦蟋礤翳镤蟋犷骢钽糸镱骘铄铒溴豉疱鏖翳珏铙眢脲黠蜾簌愆ㄤ彐轭瀛蝽癍铒溴轭翦蝾犰钺礤趄犷箧矧憝骢钽箫躜沐聃艴溴篝聃艴箝脲黠蜾簌愆┅ㄤ彐躅怩殪洵聃艴弩铒溴螬Ⅳ躜铙翳扉铄狎扉篝镦邃珏轭麸聃艴钺礤螈磲疸狎＇灬礅溽ㄦ轵篝铒溴箦泔钿铒溴ㄦ矧磲铋岘麸幄ㄧ弭骈蝮舡铒溴侯犴濠ㄧ弭箦泔钿铒溴侯犴濠┅ㄣ镱啜侯犴篝狎舡钺礤铒溴螬ㄡ痧孱铒溴啜ê钺礤孱洵钺礤┅┅ㄤ彐磲泸溴骈铄簌篝屙é蝈篝铒溴螬⒃犭弩扉篝镦痨轶ê钺礤烘衡狒汨箝濠犷趱蝾翳屙轭麸蝽铒溴翳狒黠螂轭箦聃孱糸犰矧溴虍领蝈汩疱狎犰箫箦躔麸忮祜徜邃轭麸磲篝弪箦蝣弪鲩翳徜洵蝈汩疱礤翳镤戾è聃艴弩ㄢ蹰熹聃艴弩铒溴螬┅啜痱镧括磲疸狎＇灬礅溽铒溴聃艴灞聃艴宀鏖翳珏铙眢钺礤脲ㄤ彐轭瀛蝽癍铒溴轭翦蝾犰ㄧ弭铒溴侯犴濠ㄧ弭铒溴烘瞟聃艴灞聃艴宀ㄧ弭铒溴衡狒汨箝濠钺礤脲┅铒溴聃艴弩ㄣ潋聃艴弩┅ㄤ彐礤翳镤徜洵蝈汩疱è眢趄磲篝弪┅括磲疸狎＇灬礅溽铒溴啜徜洵蝈汩疱眢趄ì磲箬躔簌礅镬р蹰熹ㄧ弭铒溴侯犴濠Л蝈汩疱┅┅铒溴螬┅┅